#d3

## 选择集

```
d3.select(选择器) 
```
返回选择器选中的第一个元素

```
d3.selectAll(选择器) 
```
返回选择器选中的全部元素


##绑定数据

**绑定一个数据**

```
//为dom节点绑定数据data
dom.datum(data); 

//为dom设置text
dom.text(function(data, index){
	//data就是所绑定的数据
	//index是当前元素在选择集中的下标
	return data;
});
```


**绑定多条数据**

```
var update = dom.data(array);
```  
将数组数据分别绑定到个元素上, 返回update对象，update对象包含已经绑定数据的元素，和获取多余数据的函数，以及获取多余元素的函数


```
var enter = update.enter();
```
 当数据量多，元素量少时，返回多余的数据


```
var enter = update.enter()
	.append('p')
	.text(function(d){
		return d;
	});
```
可以在enter()后跟append()添加元素，并使用多余数据


```
var exit = update.exit(); 
```
当数据量少，元素量多时，返回多余的元素。
因为没有数据，所以通常处理手段是移除掉 .remove()。




##比例尺

**线性比例尺**

```

var dataset = [1.2, 2.3, 0.9, 1.5, 3.3];
var min = d3.min(dataset);
var max = d3.max(dataset);

//将 dataset 中最小的值，映射成 10；将最大的值，映射成 300。 domain() 相当于数学的函数中的x（定义域），range()相当于函数中的y（值域）。scaleLinear的x与y是线性关系，是连续的。

var linear = d3.scale.linear()
            .domain([min, max])
            .range([10, 300]);
```

**序数比例尺**

```

var index = [0, 1, 2, 3, 4];
var color = ["red", "blue", "green", "yellow", "black"];

//可以将一系列离散的值对应到另外一系列的离散的值上

var ordinal = d3.scale.ordinal()
       .domain(index)
       .range(color);
       
ordinal(2) //返回 green

```



##坐标轴

**线性比例尺**

```
//rangeRoundBands: 值域范围，使用到axis中的效果就是x轴位于0－300的位置处
var index = [ 1, 2, 3, 4, 5];
var ordinal = d3.scale.ordinal()
       .domain(index)
       .rangeRoundBands([0, 300]);


//初始化坐标轴
var axis = d3.svg.axis()
       .scale(ordinal)      //指定比例尺
       .orient('bottom');   //指定方向


添加坐标轴
var gxAxis = svg.append("g")
       .attr("class","axis")
       .attr("transform","translate(20,150)")
       .call(axis);
```

